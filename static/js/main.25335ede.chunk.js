(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{39:function(e,t,s){e.exports=s(70)},44:function(e,t,s){},68:function(e,t,s){},70:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),r=s(36),c=s.n(r),i=(s(44),s(22)),l=s(13),o=s.n(l),u=s(23),m=s(19),d=s(18),g=s(7),h=s(8),p=s(11),v=s(10),f=s(9),b=s(24),k=s.n(b),y=[{id:0,src:"./Assets/crybot-msg.svg",alt:"Crying robot",triggers:["sorry","anxious","depressed"]},{id:1,src:"./Assets/deadbot-msg.svg",alt:"Dead robot"},{id:2,src:"./Assets/despairbot-msg.svg",alt:"Wailing robot",triggers:["so sorry!"]},{id:3,src:"./Assets/grinbot-msg.svg",alt:"Smiling robot"},{id:4,src:"./Assets/groanbot-msg.svg",alt:"Groaning robot",triggers:["oh wow"]},{id:5,src:"./Assets/luvbot-msg.svg",alt:"Lovestruck robot",triggers:["proud","great","nice"]},{id:6,src:"./Assets/sadbot-msg.svg",alt:"Frowning robot",triggers:["mm","i see"]}],x=function(e){Object(v.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(g.a)(this,s),(a=t.call(this,e)).state={props:e},a}return Object(h.a)(s,[{key:"render",value:function(){var e=this.props.emotion;return n.a.createElement("div",{className:"chat"},"bot"===this.props.speaker&&n.a.createElement("div",{className:"row message-row"},n.a.createElement("img",{key:y[e].id,src:y[e].src,alt:y[e].alt}),n.a.createElement("div",{className:"col bot-message-col"},n.a.createElement("span",{className:"bot-text"},this.props.text))),"me"===this.props.speaker&&n.a.createElement("div",{className:"row justify-content-end align-items-end message-row"},n.a.createElement("div",{className:"col human-message-col"},n.a.createElement("span",{className:"human-text"},this.props.text))))}}]),s}(a.Component),E=s(38),N=s(1),w=s(72),j=function(e){return n.a.createElement("div",{className:"reply-col"},n.a.createElement("a",{style:{margin:3},href:"/",className:"btn btn-primary",id:"choice-btn",onClick:function(t){return e.click(t,e.reply)}},e.reply))},O=function(e){Object(v.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(g.a)(this,s),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(p.a)(a)),a}return Object(h.a)(s,[{key:"handleClick",value:function(e,t){this.props.replyClick(e,t)}},{key:"renderQuickReply",value:function(e,t){return n.a.createElement(j,{key:t,click:this.handleClick,reply:e})}},{key:"renderQuickReplies",value:function(e){var t=this;return e?e.map((function(e,s){return t.renderQuickReply(e,s)})):null}},{key:"render",value:function(){return n.a.createElement("div",{id:"quick-replies",className:"row justify-content-end"},this.renderQuickReplies(this.props.text))}}]),s}(a.Component),S=[{id:0,src:"./Assets/crybot-status.svg",alt:"Crying robot",triggers:["sorry","anxious","depressed"]},{id:1,src:"./Assets/deadbot-status.svg",alt:"Dead robot"},{id:2,src:"./Assets/despairbot-status.svg",alt:"Wailing robot",triggers:["so sorry!"]},{id:3,src:"./Assets/grinbot-status.svg",alt:"Smiling robot"},{id:4,src:"./Assets/groanbot-status.svg",alt:"Groaning robot"},{id:5,src:"./Assets/luvbot-status.svg",alt:"Lovestruck robot",triggers:["proud","great","nice"]},{id:6,src:"./Assets/sadbot-status.svg",alt:"Frowning robot",triggers:["mm","i see"]}],R=new E.a,q=function(e){Object(v.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(g.a)(this,s),(a=t.call(this,e)).messageLength=1,a.handleInput=a.handleInput.bind(Object(p.a)(a)),a.handleQuickReplyPayload=a.handleQuickReplyPayload.bind(Object(p.a)(a)),a.state={messages:[],emotionCount:0,quickReplies:[],shopWelcomeSent:!1,showBot:!0,emotion:3,success:!1},void 0===R.get("userID")&&R.set("userID",Object(w.a)(),{path:"/"}),a}return Object(h.a)(s,[{key:"df_text_query",value:function(){var e=Object(d.a)(o.a.mark((function e(t){var s,a,n,r,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({quickReplies:[]}),s={speaker:"me",msg:{text:{text:t}}},this.setState({messageLength:1}),this.setState({messages:[].concat(Object(m.a)(this.state.messages),[s])}),e.prev=4,e.next=7,k.a.post("https://bingebot.herokuapp.com/api/df_text_query",{text:t,userID:R.get("userID")});case 7:""!==(a=e.sent).data[0].queryResult.intent.displayName.replace(/[^\d.]/g,"")?(n=parseInt(a.data[0].queryResult.intent.displayName.replace(/[^\d.]/g,"")),this.emotionHandler(n)):this.emotionHandler(3),r=Object(u.a)(a.data[0].queryResult.fulfillmentMessages),e.prev=10,r.s();case 12:if((c=r.n()).done){e.next=29;break}if(!(i=c.value).text){e.next=26;break}return s={speaker:"bot",msg:i},(i.text.text[0].includes("significant")||i.text.text[0].includes("Victory!"))&&this.aSuccess(),(i.text.text[0].includes("technique")||i.text.text[0].includes("activity"))&&this.unSuccess(),i.text.text[0].includes("Ah, I see.")&&this.emotionHandler(0),(i.text.text[0].includes("significant")||i.text.text[0].includes("Victory!"))&&this.aSuccess(),e.next=22,this.resolveAfterXSeconds(this.state.messageLength);case 22:this.setState({messageLength:i.text.text[0].length}),this.setState({messages:[].concat(Object(m.a)(this.state.messages),[s])}),e.next=27;break;case 26:i.quickReplies&&this.setState({quickReplies:i.quickReplies.quickReplies});case 27:e.next=12;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(10),r.e(e.t0);case 34:return e.prev=34,r.f(),e.finish(34);case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(4),s={speaks:"bot",msg:{text:{text:"Sorry, something went wrong. Try refreshing me."}}};case 42:case"end":return e.stop()}}),e,this,[[4,39],[10,31,34,37]])})));return function(t){return e.apply(this,arguments)}}()},{key:"df_event_query",value:function(){var e=Object(d.a)(o.a.mark((function e(t){var s,a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("https://bingebot.herokuapp.com/api/df_event_query",{event:t,userID:R.get("userID")});case 2:s=e.sent,a=Object(u.a)(s.data[0].queryResult.fulfillmentMessages),e.prev=4,a.s();case 6:if((n=a.n()).done){e.next=17;break}if(r=n.value,c={speaker:"bot",msg:r},r.quickReplies&&this.setState({quickReplies:r.quickReplies.quickReplies}),!r.text){e.next=15;break}return e.next=13,this.resolveAfterXSeconds(this.state.messageLength);case 13:this.setState({messageLength:r.text.text[0].length}),this.setState({messages:[].concat(Object(m.a)(this.state.messages),[c])});case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),a.e(e.t0);case 22:return e.prev=22,a.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[4,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"emotionHandler",value:function(e){this.setState({emotion:e}),this.setState({emotionCount:this.state.messages.length+3})}},{key:"resolveAfterXSeconds",value:function(e){return new Promise((function(t){setTimeout((function(){t(e)}),40*e)}))}},{key:"componentDidMount",value:function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.resolveAfterXSeconds(5),this.df_event_query("welcome");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.messagesEnd.scrollIntoView({behavior:"smooth"}),this.talkInput&&this.inputElement.focus(),this.state.messages.length===this.state.emotionCount&&this.emotionHandler(3)}},{key:"aSuccess",value:function(){this.setState({emotion:5}),this.setState({success:!0}),document.body.style.backgroundImage="url(./Assets/confetti.gif)"}},{key:"unSuccess",value:function(){document.body.style.backgroundImage=""}},{key:"handleInput",value:function(e){"Enter"===e.key&&(this.df_text_query(e.target.value),e.target.value="")}},{key:"handleQuickReplyPayload",value:function(e,t){e.preventDefault(),e.stopPropagation(),this.df_text_query(t)}},{key:"renderOneMessage",value:function(e,t){if(e.msg&&e.msg.text&&e.msg.text.text)return n.a.createElement(x,{speaker:e.speaker,text:e.msg.text.text,key:t,emotion:this.state.emotion})}},{key:"renderQuickReplies",value:function(e,t){return n.a.createElement(O,{key:t,speaker:"bot",text:this.state.quickReplies?this.state.quickReplies:null,replyClick:this.handleQuickReplyPayload})}},{key:"renderMessages",value:function(e){var t=this;return e?e.map((function(e,s){return t.renderOneMessage(e,s)})):null}},{key:"render",value:function(){var e=this,t=this.state.emotion;if(this.state.showBot)return n.a.createElement("div",null,n.a.createElement("div",{className:"container-fluid site-container"},n.a.createElement("div",{className:"row justify-content-center align-content-center header-row"},n.a.createElement("h3",null," Fuck, I'm Hungry.")),n.a.createElement("div",{className:"container chatbot-container"},n.a.createElement("div",{className:"row bot-hed-row align-items-center"},n.a.createElement("div",{className:"col-6"},n.a.createElement("div",{className:"row align-items-center"},n.a.createElement("img",{key:S[t].id,src:S[t].src,alt:S[t].alt}),n.a.createElement("div",{className:"col"},n.a.createElement("h5",{className:"bot-name"},"Bingebot"),n.a.createElement("p",{className:"bot-status"},n.a.createElement("i",null,"Online"))))),n.a.createElement("span",{className:"dot"})),n.a.createElement("div",{className:"scale-in-center row chatbot-row"},n.a.createElement("div",{className:"col-8 chatbot-col"},n.a.createElement("div",{id:"chatbot"},this.renderMessages(this.state.messages),this.renderQuickReplies(this.state.quickReplies),n.a.createElement("div",{ref:function(t){e.messagesEnd=t}})))),n.a.createElement("div",{className:"input-row"},n.a.createElement("input",{type:"text",onKeyPress:this.handleInput,placeholder:"Type a message",ref:function(t){e.inputElement=t},autoFocus:!0})))),n.a.createElement("div",null,n.a.createElement("img",{alt:"",className:"load-images",src:S[0].src}),n.a.createElement("img",{alt:"",className:"load-images",src:S[1].src}),n.a.createElement("img",{alt:"",className:"load-images",src:S[2].src}),n.a.createElement("img",{alt:"",className:"load-images",src:S[3].src}),n.a.createElement("img",{alt:"",className:"load-images",src:S[4].src}),n.a.createElement("img",{alt:"",className:"load-images",src:S[5].src}),n.a.createElement("img",{alt:"",className:"load-images",src:S[6].src}),n.a.createElement("img",{alt:"",className:"load-images",src:y[0].src}),n.a.createElement("img",{alt:"",className:"load-images",src:y[1].src}),n.a.createElement("img",{alt:"",className:"load-images",src:y[2].src}),n.a.createElement("img",{alt:"",className:"load-images",src:y[3].src}),n.a.createElement("img",{alt:"",className:"load-images",src:y[4].src}),n.a.createElement("img",{alt:"",className:"load-images",src:y[5].src}),n.a.createElement("img",{alt:"",className:"load-images",src:y[6].src})))}}]),s}(a.Component),A=Object(N.d)(q),C=(s(68),function(e){Object(v.a)(s,e);var t=Object(f.a)(s);function s(){return Object(g.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return n.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},n.a.createElement("p",{className:""},"A nonsense project by ",n.a.createElement("a",{className:"mainlink",href:"https://mattseidholz.com"},"Matt Seidholz")))}}]),s}(n.a.Component)),I=function(){return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(i.a,null,n.a.createElement(A,null))),n.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"},className:"row signature-row"},n.a.createElement(C,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s(69);c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.25335ede.chunk.js.map